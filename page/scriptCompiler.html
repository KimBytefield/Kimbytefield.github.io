<html>
<head>
	<title>script_Compiler</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="Script source compile using by closure-compiler openAPI">
	<meta name="google-site-verification" content="_umPfWgqC5Tblpzs4BwMKd5dEFzFYg9Eaaq3OqXaWqU" />
	<link rel="stylesheet"
				href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
				integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
				crossorigin="anonymous">
	<link rel="icon" href="https://yourdomain.com/path/to/favicon.ico" type="image/x-icon">
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://code.jquery.com/jquery-latest.min.js"></script>
	<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

	<link rel="icon" href="https://mobwithad.com/img/favicon.ico" type="image/x-icon">
	<style>
      body {
          background-color: #e9ecef;
      }
      textarea::placeholder {
          padding: 15px;
      }
	</style>
</head>
<body>
<div class="jumbotron text-center p-2">
	<h1>Closure Compiler</h1>
	<p>※ 스크립트를 삽입하고 Optimize 버튼을 클릭하세요.</p>
</div>
<div class="container-fluid p-5 bg-white">
	<div>
		<div class="fixed-top align-center text-center" style="top: 45%">
			<button class="btn btn-info" type="button" onClick="javascript:optimize()">Optimize <i
					class="fas fa-angle-right"></i></button>
		</div>
		<div class="row d-flex flex-row">
			<div class="col-6 text">
				<span>Type JavaScript code to optimize here ↓↓↓</span>
			</div>
		</div>
		<div class="row align-center text-center">
			<div id="textareaContainer" class="col-6">
				<textarea row=100 class="horizontal border" style="height: 100%; width:100%;"
									placeholder="script를 입력해주세요."></textarea>
			</div>
			<div class="col-6">
				<div id="textContainer">
					<div style="width:100%;height:100%;" class="border"></div>
				</div>
				<div class="">
					<button type="button" class="btn btn-warning col-12 my-2" onclick="copy();">copy</button>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
  var xhrRequest = function (method, uri, data, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          callback(xhr.responseText);
        }
      }
    };
    xhr.open(method, uri, true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send(data);
  }
</script>
<script>
  document.querySelector('#textareaContainer').style = "width: 50%; overflow: hidden; height: "+(window.innerHeight-300) + "px";
  document.querySelector('#textContainer').style = "width: 100%; text-align: start; overflow: hidden; height: "+(window.innerHeight-350) + "px";

  var optimize = () =>{
    var s = document.querySelector('#textareaContainer textarea').value;
    var jsonData = {js_code : s, compilation_level:'WHITESPACE_ONLY', output_format: 'text', output_info: 'compiled_code'}
    xhrRequest('POST','https://closure-compiler.appspot.com/compile', Object.keys(jsonData).map(key => `${key}=${jsonData[key]}`).join('&'), function(e){
      document.querySelector('#textContainer').innerText = e;
    });
  }

  var copy = () => {
    var text = document.querySelector('#textContainer').innerText;
    navigator.clipboard.writeText(text);
  }
</script>
</body>
</html>
