<!DOCTYPE html>
<html lang="ko">
<head>
	<title>Script Tester</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="google-site-verification" content="_umPfWgqC5Tblpzs4BwMKd5dEFzFYg9Eaaq3OqXaWqU" />

	<link rel="stylesheet"
				href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
				integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
				crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://code.jquery.com/jquery-latest.min.js"></script>
	<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

	<link rel="icon" href="https://mobwithad.com/img/favicon.ico" type="image/x-icon">
</head>
<body>
	<div class="container-fluid p-0 bg-white" id="container">
		<div class="row d-flex p-3 bg-secondary">
			<div class="col-sm-12 col-xl-3 dropdown">
				<button class="btn btn-primary dropdown-toggle col-12" type="button" id="selectType" data-toggle="dropdown">
					input type
				</button>
				<div class="dropdown-menu">
					<a class="dropdown-item" href="javascript:selectTYpe('url')">url</a>
					<a class="dropdown-item" href="javascript:selectTYpe('script')">script</a>
					<a class="dropdown-item" href="javascript:selectTYpe('document')">document</a>
				</div>
			</div>
			<div class="col-lg-4 col-sm-12 btn-group ">
				<button type="button" class="btn btn-dark border" onclick="convertRotate()">SCREEN ROTATE <i class="fas fa-th-large"></i></button>
				<button type="button" class="btn btn-dark border" onclick="convertTheme()">THEME <i class="fa fa-adjust"></i></button>
			</div>
			<div class="col-lg-5 col-sm-12 align-center text-center">
				<button type="button" class="btn btn-danger col-12" onClick="javascript:excuteConvert()">RUN <i class=" far fa-caret-square-right"></i></button>
			</div>
		</div>
		<div class="col-12 pt-3">
			<p class="text-dark">※ URL 또는 SCRIPT를 삽입하고 전환버튼을 클릭하세요.</p>
		</div>
		<div class="col-12 px-lg-5" id="bodyContainer">
			<div class="align-center text-center row d-flex">
				<div class="col-12">
					<div id="textareaContainer">
						<textarea row=50 class="horizontal border bg-white text-dark" style="height: 100%; width:100%; resize:none;"
											placeholder="입력해주세요."></textarea>
					</div>
				</div>
				<div class="col-12">
					<div id="iframeContainer">
						<iframe class="border" width="100%" height="100%"></iframe>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			$(document).ready(function () {
				document.querySelector('#container').style = "overflow: hidden; height: " + (window.innerHeight - 50) + "px";
				document.querySelector('#textareaContainer').style = "overflow: hidden; height: " + (window.innerHeight / 2 - 200) + "px";
				document.querySelector('#iframeContainer').style = "overflow: hidden; height: " + (window.innerHeight / 2 - 200) + "px";
			});
			var convertType = "";
			var excuteConvert = () => {
				switch (convertType) {
					case "url":
						excuteUrl();
						break;
					case "script":
					case "documnet":
					default:
						excuteScript();
						break;
				}
			};
			var excuteUrl = () => {
				var s = document.querySelector('#textareaContainer textarea').value;
				var f = document.querySelector('#iframeContainer iframe');
				var ifrm = document.createElement('iframe');
				ifrm.src = s;
				ifrm.width = "100%";
				ifrm.height = "100%";
				ifrm.style = "position: fixed;top: 0;left: 0;border: none;z-index:99999";
				f.src = s;
			};
			var excuteScript = () => {
				var s = document.querySelector('#textareaContainer textarea').value;
				var f = document.querySelector('#iframeContainer iframe');
				var innerDocument = '<html><head><script src="https://code.jquery.com/jquery-latest.min.js"><\/script></head><body>';
				innerDocument += s;
				innerDocument += '</body>';

				f.contentDocument.write(innerDocument);
				f.contentDocument.close();
			};
			var selectTYpe = (text) => {
				document.querySelector('#selectType').innerText = text;
				convertType = text;
			};
		</script>
		<script>
			var isDark = false, isHorizontal = false;
			var convertTheme = () => {
				if(isDark){
					isDark = false;
					replaceClassName(document, 'bg-dark', 'bg-white');
					replaceClassName(document, 'text-white', 'text-dark');
					replaceClassName(document, 'btn-light', 'btn-dark');
				} else {
					isDark = true;
					replaceClassName(document, 'bg-white', 'bg-dark');
					replaceClassName(document, 'text-dark', 'text-white');
					replaceClassName(document, 'btn-dark', 'btn-light');
				}
			}
			var convertRotate = () => {
				var container = document.querySelector('#bodyContainer');
				if(isHorizontal){
					isHorizontal = false;
					replaceClassName(container, 'col-6', 'col-12');
				} else {
					isHorizontal = true;
					replaceClassName(container, 'col-12', 'col-6');
				}
			}

			var replaceClassName = (target, asIS, toBe) => {
				var targetArr = target.getElementsByClassName(asIS);
				if(targetArr != undefined){
					var length = targetArr.length;
					for(var i = length-1; i >= 0; i--) {
						var className = targetArr[i].className;
						targetArr[i].className = className.replaceAll(asIS, toBe);
					}
				}
			}
		</script>
		<div class="col-12" id="footer">
			<iframe class="my-2" src="./footer.html" width="100%" height="140" frameborder="0" scrolling="no"></iframe>
		</div>
	</div>
</body>
</html>
